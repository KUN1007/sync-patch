model patch_person {
  id                 Int      @id @default(autoincrement())

  image              String   @default("") @db.VarChar(1007)
  roles              String[] @default([])
  language           String   @default("")
  links              String[] @default([])

  vndb_staff_id      String?  @db.VarChar(32)
  bangumi_person_id  Int?

  name_zh_cn         String   @default("") @db.VarChar(1007)
  name_ja_jp         String   @default("") @db.VarChar(1007)
  name_en_us         String   @default("") @db.VarChar(1007)

  description_zh_cn  String  @db.VarChar(100007) @default("")
  description_ja_jp  String  @db.VarChar(100007) @default("")
  description_en_us  String  @db.VarChar(100007) @default("")

  birthday           String  @default("")
  blood_type         String  @default("")
  reference_source   String  @default("")
  birthplace         String  @default("")
  office             String  @default("")
  x                  String  @default("")
  spouse             String  @default("")
  official_website   String  @default("")
  blog               String  @default("")


  alias            patch_person_alias[]
  chars patch_char_person_relation[]
  patches patch_person_relation[]

  @@unique([ vndb_staff_id])
  @@unique([bangumi_person_id])

  created            DateTime @default(now())
  updated            DateTime @updatedAt
}

model patch_person_alias {
  id          Int          @id @default(autoincrement())
  name        String       @db.VarChar(233)
  person_id   Int
  person      patch_person @relation(fields: [person_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  created DateTime @default(now())
  updated DateTime @updatedAt

  @@index([person_id])
  @@index([name])
  @@unique([person_id, name])
}

model patch_person_relation {
  id             Int          @id @default(autoincrement())
  patch_id       Int
  patch_person_id Int

  patch  patch        @relation(fields: [patch_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  person patch_person @relation(fields: [patch_person_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  created DateTime @default(now())
  updated DateTime @updatedAt

  @@unique([patch_id, patch_person_id])
  @@index([patch_id])
  @@index([patch_person_id])
}
